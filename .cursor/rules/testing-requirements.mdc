---
description: Require tests when making code changes
alwaysApply: true
---

# Testing Requirements

When making code changes, you must also add appropriate tests.

## Unit Tests (Jest)

Add `*.test.ts` files colocated with the code for:
- Utility functions and helpers
- Business logic (tax calculations, order totals, etc.)
- Data transformations
- Hooks with complex logic

```typescript
// packages/core/src/utils/format.ts
export function formatPrice(value: number): string { ... }

// packages/core/src/utils/format.test.ts
describe('formatPrice', () => {
  it('formats positive numbers', () => { ... });
});
```

Run: `pnpm test` or `pnpm jest <path>`

## E2E Tests (Playwright)

Add `*.spec.ts` files in `apps/main/e2e/` for:
- New user-facing features
- Critical user flows (auth, checkout, navigation)
- Changes that affect multiple screens

## When to Skip

Skip tests only when:
- Change is purely cosmetic (CSS/styling only)
- Documentation or comments only
- User explicitly requests no tests
