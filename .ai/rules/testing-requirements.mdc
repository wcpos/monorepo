---
description: Require linting and tests when making code changes
alwaysApply: true
---

# Pre-Commit Requirements

Before committing changes, you MUST run linting and tests.

## Linting (ESLint + Prettier)

Run linting with auto-fix on changed files:

```bash
pnpm lint:fix
```

Or for specific packages:

```bash
cd packages/core && npx eslint --fix src/path/to/changed/file.ts
```

The project uses `@wcpos/eslint-config` with:
- Prettier (tabs, single quotes, trailing commas)
- Import ordering (react first, then external, then @wcpos/*)
- React Compiler rules

## Unit Tests (Jest)

Add `*.test.ts` files colocated with the code for:
- Utility functions and helpers
- Business logic (tax calculations, order totals, etc.)
- Data transformations and hooks with complex logic

Run: `pnpm test` or `cd packages/<pkg> && npx jest <path>`

## E2E Tests (Playwright)

Add `*.spec.ts` files in `apps/main/e2e/` for:
- New user-facing features
- Critical user flows (auth, checkout, navigation)

## Pre-Commit Checklist

1. Run `pnpm lint:fix` to auto-fix linting issues
2. Run `pnpm test` to verify no regressions
3. If lint errors remain, fix them manually before committing

## When to Skip Tests

- Purely cosmetic changes (CSS/styling only)
- Documentation or comments only
- User explicitly requests no tests
